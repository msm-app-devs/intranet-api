<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>
        function readURL(input) {

            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    $('#blah').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }

        function getBase64Image(img) {
            // Create an empty canvas element
            var canvas = document.createElement("canvas");
                canvas.width = img.width;
            canvas.height = img.height;

            // Copy the image contents to the canvas
            var ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0);

            // Get the data-URL formatted image
            // Firefox supports PNG and JPEG. You could check img.src to
            // guess the original format, but be aware the using "image/jpg"
            // will re-encode the image.
            var dataURL = canvas.toDataURL("image/png");

            return dataURL.replace(/^data:image\/(png|jpg);base64,/, "");
//                return dataURL;
        }


        $(document).ready(function(){


            $("#image_uploader").change(function() {
                readURL(this);
            });

            $("#upload").click(function(){
//                var file_data = $('#image_uploader').prop('files')[0];
//                var form_data = new FormData();
//                form_data.append('file', file_data);
//                console.log(form_data);

                var theImage = $("#blah").prop("src");

                var fd = new FormData();

                var file_data = $('#image_uploader').prop('files')[0]; // for multiple files

                fd.append('file',file_data);
//                for(var i = 0;i<file_data.length;i++){
//                    fd.append("file_"+i, file_data[i]);
//                }
                console.log(fd);
                var test_data = [{
                        name:"firstName", value:"Zlatan"},
                    {
                        name:"lastName", value:"Ibrahimovich"},
                    {
                        name:"position", value:"Business analytics"},
                    {
                        name:"team", value:"Business"},
                    {
                        name:"startDate", value:"07/09/2016"},
                    {name:"birthday", value:"12/11/1987"}];
//                var other_data = $('form').serializeArray();
                var other_data = test_data;
//                console.log(other_data);
//                $.each(other_data,function(key,input){
////                    alert(input.value);
//                    fd.append(input.name,input.value);
//                });

                var myform = {};


//                $.ajax({
//
////             type: 'POST',
////                url: 'http://q1q1.eu/employees/employees/addemployee',
//                    url: "../employees",
//                    type: 'POST',
//                    data: JSON.stringify({"employee" :
//                        {extId: 4,
//                        firstName: "Zlatann",
//                        lastName: "Zlatinov",
//                        position: "Business analytics",
//                        team : "Business",
//                        startDate : "07/09/2016",
//                        birthday: "12/11/1987",
//                        image : theImage.replace(/^data:image\/(png|jpg);base64,/, "")}
//                    }),
////                    data: {
////                        extId: 4,
////                        firstName: "Zlatann",
////                        lastName: "Zlatinov",
////                        position: "Business analytics",
////                        team : "Business",
////                        startDate : "07/09/2016",
////                        birthday: "12/11/1987",
////                        image: theImage
////                    },
//                    success: function(response) {
//                        console.log(response);
//                    }
//                });

                $.ajax({
                    url: '../employees/1',
                    data: file_data,
                    processData: false,
                    contentType: "image/png",
                    type: 'PUT',
                    success: function(data){
                        console.log(data);
                    }
                });


//                $.ajax({
//                    url: '../employees/1', // point to server-side PHP script
//                    dataType: 'text',  // what to expect back from the PHP script, if anything
//                    cache: false,
//                    contentType: false,
//                    processData: false,
////                    data: JSON.stringify({'image':form_data}),
//                    data: JSON.stringify({"employee" :
//                        {extId: 4,
//                        firstName: "Zlatan",
//                        lastName: "Ibrahimovich",
//                        position: "Business analytics",
//                        team : "Business",
//                        startDate : "07/09/2016",
//                        birthday: "12/11/1987",
//                        image : form_data}
//                    }),
//                    type: 'post',
//                    success: function(php_script_response){
//                        alert(php_script_response); // display response from the PHP script, if any
//                    }
//                });
            });
//            $.ajax({
//                type: 'PUT',
////                type: 'DELETE',
////                url: 'http://q1q1.eu/employees/employees',
//                url: '../employees/1',
////                data :   JSON.stringify({"news":{"author":"admin","title":"another news","body":"This is another news for our company"}}),
//                data :   JSON.stringify({"employee":{"firstName":"Grigorrr"}}),
////                data: {
////                    title: "News 3",
////                    body: "Martin",
////                    image: "Radevvv"
////                    position: "Charting",
////                    team : "Charting",
////                    startDate : "10/08/2010",
////                    birthday: "12/05/1980",
////                    active: "yes"
////                },
//                success: function(response) {
//                    console.log(response);
//                    $("#div1").html(response);
//                }
//            });
        });
    </script>
</head>
<body>
<div id="div1"></div>
Upload image:<input type="file" id="image_uploader">
<img id="blah" src="#" alt="your imageee" />
<div id="upload">Upload</div>
</body>
</html>